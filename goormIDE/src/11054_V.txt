// 가장 긴 바이토닉 부분 수열 // LIS 응용 // 동적계획법
https://st-lab.tistory.com/136

#include <stdio.h>

int main()
{
	int N;
	int num[1001] = {0,};
	int dp_plus[1001] = {0,};
	int dp_min[1001] = {0,};
	scanf("%d", &N);
	for(int i=0; i<N; i++)
	{
		scanf("%d", &num[i]);
	}
	for(int i=1; i<N; i++)
	{
		for(int k=0; k<=i-1; k++)
		{
			if(num[k]<num[i] && dp_plus[k] >= dp_plus[i])
				dp_plus[i] = dp_plus[k] + 1;
		}
	}
	for(int i=N-2; i>=0; i--)
	{
		for(int k=N-1; k>i; k--)
		{
			if(num[k]<num[i] && dp_min[k] >= dp_min[i])
				dp_min[i] = dp_min[k] +1;
		}
	}
	int max = dp_plus[0]+dp_min[0]+1;
	for(int i=1; i<N; i++)
	{
		if(max<dp_plus[i]+dp_min[i]+1)
			max = dp_plus[i]+dp_min[i]+1;
	}
	printf("%d\n", max);
}